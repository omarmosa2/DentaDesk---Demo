import{r as e}from"./vendor-696af5bd.js";import{M as o,o as r,j as t,u as n,Y as s,H as a,t as u,b as c,r as i,F as l}from"./ui-cacc1eea.js";var f="rovingFocusGroup.onEntryFocus",d={bubbles:!1,cancelable:!0},p="RovingFocusGroup",[v,b,m]=o(p),[w,g]=r(p,[m]),[F,I]=w(p),h=e.forwardRef((e,o)=>t.jsx(v.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(v.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(R,{...e,ref:o})})}));h.displayName=p;var R=e.forwardRef((o,r)=>{const{__scopeRovingFocusGroup:l,orientation:v,loop:m=!1,dir:w,currentTabStopId:g,defaultCurrentTabStopId:I,onCurrentTabStopIdChange:h,onEntryFocus:R,preventScrollOnEntryFocus:y=!1,...S}=o,T=e.useRef(null),A=n(r,T),E=s(w),[D,j]=a({prop:g,defaultProp:I??null,onChange:h,caller:p}),[C,_]=e.useState(!1),G=u(R),K=b(l),k=e.useRef(!1),[L,M]=e.useState(0);return e.useEffect(()=>{const e=T.current;if(e)return e.addEventListener(f,G),()=>e.removeEventListener(f,G)},[G]),t.jsx(F,{scope:l,orientation:v,dir:E,loop:m,currentTabStopId:D,onItemFocus:e.useCallback(e=>j(e),[j]),onItemShiftTab:e.useCallback(()=>_(!0),[]),onFocusableItemAdd:e.useCallback(()=>M(e=>e+1),[]),onFocusableItemRemove:e.useCallback(()=>M(e=>e-1),[]),children:t.jsx(c.div,{tabIndex:C||0===L?-1:0,"data-orientation":v,...S,ref:A,style:{outline:"none",...o.style},onMouseDown:i(o.onMouseDown,()=>{k.current=!0}),onFocus:i(o.onFocus,e=>{const o=!k.current;if(e.target===e.currentTarget&&o&&!C){const o=new CustomEvent(f,d);if(e.currentTarget.dispatchEvent(o),!o.defaultPrevented){const e=K().filter(e=>e.focusable);x([e.find(e=>e.active),e.find(e=>e.id===D),...e].filter(Boolean).map(e=>e.ref.current),y)}}k.current=!1}),onBlur:i(o.onBlur,()=>_(!1))})})}),y="RovingFocusGroupItem",S=e.forwardRef((o,r)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:u,children:f,...d}=o,p=l(),m=u||p,w=I(y,n),g=w.currentTabStopId===m,F=b(n),{onFocusableItemAdd:h,onFocusableItemRemove:R,currentTabStopId:S}=w;return e.useEffect(()=>{if(s)return h(),()=>R()},[s,h,R]),t.jsx(v.ItemSlot,{scope:n,id:m,focusable:s,active:a,children:t.jsx(c.span,{tabIndex:g?0:-1,"data-orientation":w.orientation,...d,ref:r,onMouseDown:i(o.onMouseDown,e=>{s?w.onItemFocus(m):e.preventDefault()}),onFocus:i(o.onFocus,()=>w.onItemFocus(m)),onKeyDown:i(o.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void w.onItemShiftTab();if(e.target!==e.currentTarget)return;const o=function(e,o,r){const t=function(e,o){return"rtl"!==o?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===o&&["ArrowLeft","ArrowRight"].includes(t)||"horizontal"===o&&["ArrowUp","ArrowDown"].includes(t)?void 0:T[t]}(e,w.orientation,w.dir);if(void 0!==o){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=F().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===o)n.reverse();else if("prev"===o||"next"===o){"prev"===o&&n.reverse();const s=n.indexOf(e.currentTarget);n=w.loop?(t=s+1,(r=n).map((e,o)=>r[(t+o)%r.length])):n.slice(s+1)}setTimeout(()=>x(n))}var r,t}),children:"function"==typeof f?f({isCurrentTabStop:g,hasTabStop:null!=S}):f})})});S.displayName=y;var T={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function x(e,o=!1){const r=document.activeElement;for(const t of e){if(t===r)return;if(t.focus({preventScroll:o}),document.activeElement!==r)return}}var A=h,E=S;export{E as I,A as R,g as c};
