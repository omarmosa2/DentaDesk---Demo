import{j as e,S as t,o as s,u as r,Y as a,b as n,x as i,r as o,t as l,v as c,Z as d}from"./ui-cacc1eea.js";import{r as u,c as m}from"./vendor-696af5bd.js";import{ay as h,az as p,aA as f,aB as x,aC as g,as as v,L as y,aD as j,u as _,aE as b,D as N,f as w,g as k,h as C,i as S,I as T,T as E,S as O,m as A,n as Z,o as P,p as R,x as I,w as D,aF as $,y as L,z,E as F,F as M,G as V,H as q,N as U,O as B,P as W,e as K,C as H,l as Y,at as X,M as J,j as G,k as Q,v as ee,B as te,a6 as se,Z as re,aG as ae,_ as ne,U as ie,ag as oe,a1 as le,a0 as ce,$ as de,ae as ue,c as me,s as he}from"./index-3a8dc84c.js";import{g as pe,a as fe}from"./cardStyles-c77ef46a.js";import{n as xe}from"./notificationService-09cb27cc.js";import{E as ge}from"./exportService-1536567b.js";import{T as ve,a as ye,b as je,c as _e}from"./tabs-952e3ebd.js";import{C as be,a as Ne,b as we}from"./collapsible-d3d2b240.js";import{P as ke}from"./package-557fa287.js";import{F as Ce}from"./file-text-861b9f90.js";import{T as Se,a as Te,b as Ee,c as Oe,d as Ae,e as Ze}from"./table-20957d0a.js";import{F as Pe}from"./filter-f006659c.js";import{P as Re}from"./pen-square-6c634feb.js";import{T as Ie,D as De}from"./upload-4df8a268.js";import{C as $e,a as Le}from"./chevrons-right-9b995d31.js";import{C as ze}from"./chevron-left-343e35ff.js";import{A as Fe,a as Me,b as Ve}from"./arrow-up-832b5917.js";import{C as qe}from"./currency-display-e01ebf49.js";import{P as Ue}from"./plus-1eab3b5b.js";import{B as Be}from"./bell-847606c7.js";import{T as We}from"./trending-up-5cd3f2a0.js";import{T as Ke}from"./trending-down-0dc1e939.js";import"./pdf-991f41f6.js";import"./utils-ec524415.js";import"./charts-b4389b44.js";import"./excel-37615a09.js";import"./index-a46c293c.js";const He=(e,t,s)=>{if(e&&"reportValidity"in e){const r=h(s,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},Ye=(e,t)=>{for(const s in t.fields){const r=t.fields[s];r&&r.ref&&"reportValidity"in r.ref?He(r.ref,s,e):r&&r.refs&&r.refs.forEach(t=>He(t,s,e))}},Xe=(e,t)=>{t.shouldUseNativeValidation&&Ye(e,t);const s={};for(const r in e){const a=h(t.fields,r),n=Object.assign(e[r]||{},{ref:a&&a.ref});if(Je(t.names||Object.keys(e),r)){const e=Object.assign({},h(s,r));p(e,"root",n),p(s,r,e)}else p(s,r,n)}return s},Je=(e,t)=>{const s=Ge(t);return e.some(e=>Ge(e).match(`^${s}\\.\\d+`))};function Ge(e){return e.replace(/\]|\[/g,"")}function Qe(e,t,s){function r(s,r){var a;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(a=s._zod).traits??(a.traits=new Set),s._zod.traits.add(e),t(s,r);for(const e in i.prototype)e in s||Object.defineProperty(s,e,{value:i.prototype[e].bind(s)});s._zod.constr=i,s._zod.def=r}const a=s?.Parent??Object;class n extends a{}function i(e){var t;const a=s?.Parent?new n:this;r(a,e),(t=a._zod).deferred??(t.deferred=[]);for(const s of a._zod.deferred)s();return a}return Object.defineProperty(n,"name",{value:e}),Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:t=>!!(s?.Parent&&t instanceof s.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class et extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const tt={};function st(e){return e&&Object.assign(tt,e),tt}function rt(e,t){return"bigint"==typeof t?t.toString():t}const at=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function nt(e){return"string"==typeof e?e:e?.message}function it(e,t,s){const r={...e,path:e.path??[]};if(!e.message){const a=nt(e.inst?._zod.def?.error?.(e))??nt(t?.error?.(e))??nt(s.customError?.(e))??nt(s.localeError?.(e))??"Invalid input";r.message=a}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}const ot=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,rt,2),enumerable:!0})},lt=Qe("$ZodError",ot),ct=Qe("$ZodError",ot,{Parent:Error}),dt=(e=>(t,s,r,a)=>{const n=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:s,issues:[]},n);if(i instanceof Promise)throw new et;if(i.issues.length){const t=new(a?.Err??e)(i.issues.map(e=>it(e,n,st())));throw at(t,a?.callee),t}return i.value})(ct),ut=(e=>async(t,s,r,a)=>{const n=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:s,issues:[]},n);if(i instanceof Promise&&(i=await i),i.issues.length){const t=new(a?.Err??e)(i.issues.map(e=>it(e,n,st())));throw at(t,a?.callee),t}return i.value})(ct);function mt(e,t){try{var s=e()}catch(e){return t(e)}return s&&s.then?s.then(void 0,t):s}function ht(e,t){for(var s={};e.length;){var r=e[0],a=r.code,n=r.message,i=r.path.join(".");if(!s[i])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];s[i]={message:o.message,type:o.code}}else s[i]={message:n,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=s[i].types,c=l&&l[r.code];s[i]=f(i,t,s,a,c?[].concat(c,r.message):r.message)}e.shift()}return s}function pt(e,t){for(var s={};e.length;){var r=e[0],a=r.code,n=r.message,i=r.path.join(".");if(!s[i])if("invalid_union"===r.code){var o=r.errors[0][0];s[i]={message:o.message,type:o.code}}else s[i]={message:n,type:a};if("invalid_union"===r.code&&r.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),t){var l=s[i].types,c=l&&l[r.code];s[i]=f(i,t,s,a,c?[].concat(c,r.message):r.message)}e.shift()}return s}function ft(e,t,s){if(void 0===s&&(s={}),function(e){return"_def"in e&&"object"==typeof e._def&&"typeName"in e._def}(e))return function(r,a,n){try{return Promise.resolve(mt(function(){return Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](r,t)).then(function(e){return n.shouldUseNativeValidation&&Ye({},n),{errors:{},values:s.raw?Object.assign({},r):e}})},function(e){if(function(e){return Array.isArray(null==e?void 0:e.issues)}(e))return{values:{},errors:Xe(ht(e.errors,!n.shouldUseNativeValidation&&"all"===n.criteriaMode),n)};throw e}))}catch(He){return Promise.reject(He)}};if(function(e){return"_zod"in e&&"object"==typeof e._zod}(e))return function(r,a,n){try{return Promise.resolve(mt(function(){return Promise.resolve(("sync"===s.mode?dt:ut)(e,r,t)).then(function(e){return n.shouldUseNativeValidation&&Ye({},n),{errors:{},values:s.raw?Object.assign({},r):e}})},function(e){if(function(e){return e instanceof lt}(e))return{values:{},errors:Xe(pt(e.issues,!n.shouldUseNativeValidation&&"all"===n.criteriaMode),n)};throw e}))}catch(He){return Promise.reject(He)}};throw new Error("Invalid input: not a Zod schema")}var xt,gt;!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const s of e)t[s]=s;return t},e.getValidEnumValues=t=>{const s=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),r={};for(const e of s)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t},e.find=(e,t)=>{for(const s of e)if(t(s))return s},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(xt||(xt={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(gt||(gt={}));const vt=xt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),yt=e=>{switch(typeof e){case"undefined":return vt.undefined;case"string":return vt.string;case"number":return Number.isNaN(e)?vt.nan:vt.number;case"boolean":return vt.boolean;case"function":return vt.function;case"bigint":return vt.bigint;case"symbol":return vt.symbol;case"object":return Array.isArray(e)?vt.array:null===e?vt.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?vt.promise:"undefined"!=typeof Map&&e instanceof Map?vt.map:"undefined"!=typeof Set&&e instanceof Set?vt.set:"undefined"!=typeof Date&&e instanceof Date?vt.date:vt.object;default:return vt.unknown}},jt=xt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class _t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},s={_errors:[]},r=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)s._errors.push(t(a));else{let e=s,r=0;for(;r<a.path.length;){const s=a.path[r];r===a.path.length-1?(e[s]=e[s]||{_errors:[]},e[s]._errors.push(t(a))):e[s]=e[s]||{_errors:[]},e=e[s],r++}}};return r(this),s}static assert(e){if(!(e instanceof _t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,xt.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},s=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];t[s]=t[s]||[],t[s].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}_t.create=e=>new _t(e);const bt=(e,t)=>{let s;switch(e.code){case jt.invalid_type:s=e.received===vt.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case jt.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,xt.jsonStringifyReplacer)}`;break;case jt.unrecognized_keys:s=`Unrecognized key(s) in object: ${xt.joinValues(e.keys,", ")}`;break;case jt.invalid_union:s="Invalid input";break;case jt.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${xt.joinValues(e.options)}`;break;case jt.invalid_enum_value:s=`Invalid enum value. Expected ${xt.joinValues(e.options)}, received '${e.received}'`;break;case jt.invalid_arguments:s="Invalid function arguments";break;case jt.invalid_return_type:s="Invalid function return type";break;case jt.invalid_date:s="Invalid date";break;case jt.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:xt.assertNever(e.validation):s="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case jt.too_small:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case jt.too_big:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case jt.custom:s="Invalid input";break;case jt.invalid_intersection_types:s="Intersection results could not be merged";break;case jt.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case jt.not_finite:s="Number must be finite";break;default:s=t.defaultError,xt.assertNever(e)}return{message:s}};let Nt=bt;function wt(e,t){const s=Nt,r=(e=>{const{data:t,path:s,errorMaps:r,issueData:a}=e,n=[...s,...a.path||[]],i={...a,path:n};if(void 0!==a.message)return{...a,path:n,message:a.message};let o="";const l=r.filter(e=>!!e).slice().reverse();for(const c of l)o=c(i,{data:t,defaultError:o}).message;return{...a,path:n,message:o}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===bt?void 0:bt].filter(e=>!!e)});e.common.issues.push(r)}class kt{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const r of t){if("aborted"===r.status)return Ct;"dirty"===r.status&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const r of t){const e=await r.key,t=await r.value;s.push({key:e,value:t})}return kt.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const r of t){const{key:t,value:a}=r;if("aborted"===t.status)return Ct;if("aborted"===a.status)return Ct;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!r.alwaysSet||(s[t.value]=a.value)}return{status:e.value,value:s}}}const Ct=Object.freeze({status:"aborted"}),St=e=>({status:"dirty",value:e}),Tt=e=>({status:"valid",value:e}),Et=e=>"aborted"===e.status,Ot=e=>"dirty"===e.status,At=e=>"valid"===e.status,Zt=e=>"undefined"!=typeof Promise&&e instanceof Promise;var Pt;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(Pt||(Pt={}));class Rt{constructor(e,t,s,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const It=(e,t)=>{if(At(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new _t(e.common.issues);return this._error=t,this._error}}};function Dt(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:r,description:a}=e;if(t&&(s||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{const{message:n}=e;return"invalid_enum_value"===t.code?{message:n??a.defaultError}:void 0===a.data?{message:n??r??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:n??s??a.defaultError}},description:a}}class $t{get description(){return this._def.description}_getType(e){return yt(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:yt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new kt,ctx:{common:e.parent.common,data:e.data,parsedType:yt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Zt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){const s={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yt(e)},r=this._parseSync({data:e,path:s.path,parent:s});return It(s,r)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yt(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:t});return At(s)?{value:s.value}:{issues:t.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>At(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yt(e)},r=this._parse({data:e,path:s.path,parent:s}),a=await(Zt(r)?r:Promise.resolve(r));return It(s,a)}refine(e,t){const s=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{const a=e(t),n=()=>r.addIssue({code:jt.custom,...s(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(n(),!1)):!!a||(n(),!1)})}refinement(e,t){return this._refinement((s,r)=>!!e(s)||(r.addIssue("function"==typeof t?t(s,r):t),!1))}_refinement(e){return new Is({schema:this,typeName:Us.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Ds.create(this,this._def)}nullable(){return $s.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return js.create(this)}promise(){return Rs.create(this,this._def)}or(e){return Ns.create([this,e],this._def)}and(e){return ks.create(this,e,this._def)}transform(e){return new Is({...Dt(this._def),schema:this,typeName:Us.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Ls({...Dt(this._def),innerType:this,defaultValue:t,typeName:Us.ZodDefault})}brand(){return new Ms({typeName:Us.ZodBranded,type:this,...Dt(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new zs({...Dt(this._def),innerType:this,catchValue:t,typeName:Us.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Vs.create(this,e)}readonly(){return qs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Lt=/^c[^\s-]{8,}$/i,zt=/^[0-9a-z]+$/,Ft=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Mt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Vt=/^[a-z0-9_-]{21}$/i,qt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ut=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Bt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Wt;const Kt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ht=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Yt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Xt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Jt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Gt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Qt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",es=new RegExp(`^${Qt}$`);function ts(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function ss(e){return new RegExp(`^${ts(e)}$`)}function rs(e){let t=`${Qt}T${ts(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function as(e,t){return!("v4"!==t&&t||!Kt.test(e))||!("v6"!==t&&t||!Yt.test(e))}function ns(e,t){if(!qt.test(e))return!1;try{const[s]=e.split(".");if(!s)return!1;const r=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(r));return"object"==typeof a&&null!==a&&((!("typ"in a)||"JWT"===a?.typ)&&(!!a.alg&&(!t||a.alg===t)))}catch{return!1}}function is(e,t){return!("v4"!==t&&t||!Ht.test(e))||!("v6"!==t&&t||!Xt.test(e))}class os extends $t{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==vt.string){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.string,received:t.parsedType}),Ct}const t=new kt;let s;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(s=this._getOrReturnCtx(e,s),wt(s,{code:jt.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(s=this._getOrReturnCtx(e,s),wt(s,{code:jt.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const a=e.data.length>r.value,n=e.data.length<r.value;(a||n)&&(s=this._getOrReturnCtx(e,s),a?wt(s,{code:jt.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):n&&wt(s,{code:jt.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)Bt.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"email",code:jt.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)Wt||(Wt=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Wt.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"emoji",code:jt.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)Mt.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"uuid",code:jt.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)Vt.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"nanoid",code:jt.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)Lt.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"cuid",code:jt.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)zt.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"cuid2",code:jt.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)Ft.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"ulid",code:jt.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),wt(s,{validation:"url",code:jt.invalid_string,message:r.message}),t.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"regex",code:jt.invalid_string,message:r.message}),t.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(s=this._getOrReturnCtx(e,s),wt(s,{code:jt.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(s=this._getOrReturnCtx(e,s),wt(s,{code:jt.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(s=this._getOrReturnCtx(e,s),wt(s,{code:jt.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if("datetime"===r.kind){rs(r).test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{code:jt.invalid_string,validation:"datetime",message:r.message}),t.dirty())}else if("date"===r.kind){es.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{code:jt.invalid_string,validation:"date",message:r.message}),t.dirty())}else if("time"===r.kind){ss(r).test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{code:jt.invalid_string,validation:"time",message:r.message}),t.dirty())}else"duration"===r.kind?Ut.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"duration",code:jt.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?as(e.data,r.version)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"ip",code:jt.invalid_string,message:r.message}),t.dirty()):"jwt"===r.kind?ns(e.data,r.alg)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"jwt",code:jt.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?is(e.data,r.version)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"cidr",code:jt.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?Jt.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"base64",code:jt.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?Gt.test(e.data)||(s=this._getOrReturnCtx(e,s),wt(s,{validation:"base64url",code:jt.invalid_string,message:r.message}),t.dirty()):xt.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,s){return this.refinement(t=>e.test(t),{validation:t,code:jt.invalid_string,...Pt.errToObj(s)})}_addCheck(e){return new os({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Pt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Pt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Pt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Pt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Pt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Pt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Pt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Pt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Pt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Pt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Pt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Pt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Pt.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Pt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...Pt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Pt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Pt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...Pt.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Pt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Pt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Pt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Pt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Pt.errToObj(t)})}nonempty(e){return this.min(1,Pt.errToObj(e))}trim(){return new os({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new os({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new os({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ls(e,t){const s=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=s>r?s:r;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}os.create=e=>new os({checks:[],typeName:Us.ZodString,coerce:e?.coerce??!1,...Dt(e)});class cs extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==vt.number){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.number,received:t.parsedType}),Ct}let t;const s=new kt;for(const r of this._def.checks)if("int"===r.kind)xt.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),wt(t,{code:jt.invalid_type,expected:"integer",received:"float",message:r.message}),s.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),wt(t,{code:jt.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),wt(t,{code:jt.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty())}else"multipleOf"===r.kind?0!==ls(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),wt(t,{code:jt.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),wt(t,{code:jt.not_finite,message:r.message}),s.dirty()):xt.assertNever(r);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Pt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Pt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Pt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Pt.toString(t))}setLimit(e,t,s,r){return new cs({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:Pt.toString(r)}]})}_addCheck(e){return new cs({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Pt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Pt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Pt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Pt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Pt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Pt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Pt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Pt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Pt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&xt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if("finite"===s.kind||"int"===s.kind||"multipleOf"===s.kind)return!0;"min"===s.kind?(null===t||s.value>t)&&(t=s.value):"max"===s.kind&&(null===e||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}cs.create=e=>new cs({checks:[],typeName:Us.ZodNumber,coerce:e?.coerce||!1,...Dt(e)});class ds extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==vt.bigint)return this._getInvalidInput(e);let t;const s=new kt;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),wt(t,{code:jt.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),wt(t,{code:jt.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),wt(t,{code:jt.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):xt.assertNever(r);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.bigint,received:t.parsedType}),Ct}gte(e,t){return this.setLimit("min",e,!0,Pt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Pt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Pt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Pt.toString(t))}setLimit(e,t,s,r){return new ds({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:Pt.toString(r)}]})}_addCheck(e){return new ds({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Pt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Pt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Pt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Pt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Pt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ds.create=e=>new ds({checks:[],typeName:Us.ZodBigInt,coerce:e?.coerce??!1,...Dt(e)});class us extends $t{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==vt.boolean){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.boolean,received:t.parsedType}),Ct}return Tt(e.data)}}us.create=e=>new us({typeName:Us.ZodBoolean,coerce:e?.coerce||!1,...Dt(e)});class ms extends $t{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==vt.date){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.date,received:t.parsedType}),Ct}if(Number.isNaN(e.data.getTime())){return wt(this._getOrReturnCtx(e),{code:jt.invalid_date}),Ct}const t=new kt;let s;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(s=this._getOrReturnCtx(e,s),wt(s,{code:jt.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(s=this._getOrReturnCtx(e,s),wt(s,{code:jt.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):xt.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ms({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Pt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Pt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ms.create=e=>new ms({checks:[],coerce:e?.coerce||!1,typeName:Us.ZodDate,...Dt(e)});class hs extends $t{_parse(e){if(this._getType(e)!==vt.symbol){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.symbol,received:t.parsedType}),Ct}return Tt(e.data)}}hs.create=e=>new hs({typeName:Us.ZodSymbol,...Dt(e)});class ps extends $t{_parse(e){if(this._getType(e)!==vt.undefined){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.undefined,received:t.parsedType}),Ct}return Tt(e.data)}}ps.create=e=>new ps({typeName:Us.ZodUndefined,...Dt(e)});class fs extends $t{_parse(e){if(this._getType(e)!==vt.null){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.null,received:t.parsedType}),Ct}return Tt(e.data)}}fs.create=e=>new fs({typeName:Us.ZodNull,...Dt(e)});class xs extends $t{constructor(){super(...arguments),this._any=!0}_parse(e){return Tt(e.data)}}xs.create=e=>new xs({typeName:Us.ZodAny,...Dt(e)});class gs extends $t{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Tt(e.data)}}gs.create=e=>new gs({typeName:Us.ZodUnknown,...Dt(e)});class vs extends $t{_parse(e){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.never,received:t.parsedType}),Ct}}vs.create=e=>new vs({typeName:Us.ZodNever,...Dt(e)});class ys extends $t{_parse(e){if(this._getType(e)!==vt.undefined){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.void,received:t.parsedType}),Ct}return Tt(e.data)}}ys.create=e=>new ys({typeName:Us.ZodVoid,...Dt(e)});class js extends $t{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==vt.array)return wt(t,{code:jt.invalid_type,expected:vt.array,received:t.parsedType}),Ct;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(wt(t,{code:e?jt.too_big:jt.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(wt(t,{code:jt.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(wt(t,{code:jt.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((e,s)=>r.type._parseAsync(new Rt(t,e,t.path,s)))).then(e=>kt.mergeArray(s,e));const a=[...t.data].map((e,s)=>r.type._parseSync(new Rt(t,e,t.path,s)));return kt.mergeArray(s,a)}get element(){return this._def.type}min(e,t){return new js({...this._def,minLength:{value:e,message:Pt.toString(t)}})}max(e,t){return new js({...this._def,maxLength:{value:e,message:Pt.toString(t)}})}length(e,t){return new js({...this._def,exactLength:{value:e,message:Pt.toString(t)}})}nonempty(e){return this.min(1,e)}}function _s(e){if(e instanceof bs){const t={};for(const s in e.shape){const r=e.shape[s];t[s]=Ds.create(_s(r))}return new bs({...e._def,shape:()=>t})}return e instanceof js?new js({...e._def,type:_s(e.element)}):e instanceof Ds?Ds.create(_s(e.unwrap())):e instanceof $s?$s.create(_s(e.unwrap())):e instanceof Cs?Cs.create(e.items.map(e=>_s(e))):e}js.create=(e,t)=>new js({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Us.ZodArray,...Dt(t)});class bs extends $t{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=xt.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==vt.object){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.object,received:t.parsedType}),Ct}const{status:t,ctx:s}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),n=[];if(!(this._def.catchall instanceof vs&&"strip"===this._def.unknownKeys))for(const o in s.data)a.includes(o)||n.push(o);const i=[];for(const o of a){const e=r[o],t=s.data[o];i.push({key:{status:"valid",value:o},value:e._parse(new Rt(s,t,s.path,o)),alwaysSet:o in s.data})}if(this._def.catchall instanceof vs){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of n)i.push({key:{status:"valid",value:t},value:{status:"valid",value:s.data[t]}});else if("strict"===e)n.length>0&&(wt(s,{code:jt.unrecognized_keys,keys:n}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of n){const r=s.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new Rt(s,r,s.path,t)),alwaysSet:t in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of i){const s=await t.key,r=await t.value;e.push({key:s,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>kt.mergeObjectSync(t,e)):kt.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return Pt.errToObj,new bs({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,s)=>{const r=this._def.errorMap?.(t,s).message??s.defaultError;return"unrecognized_keys"===t.code?{message:Pt.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new bs({...this._def,unknownKeys:"strip"})}passthrough(){return new bs({...this._def,unknownKeys:"passthrough"})}extend(e){return new bs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new bs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Us.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new bs({...this._def,catchall:e})}pick(e){const t={};for(const s of xt.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new bs({...this._def,shape:()=>t})}omit(e){const t={};for(const s of xt.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new bs({...this._def,shape:()=>t})}deepPartial(){return _s(this)}partial(e){const t={};for(const s of xt.objectKeys(this.shape)){const r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}return new bs({...this._def,shape:()=>t})}required(e){const t={};for(const s of xt.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let e=this.shape[s];for(;e instanceof Ds;)e=e._def.innerType;t[s]=e}return new bs({...this._def,shape:()=>t})}keyof(){return As(xt.objectKeys(this.shape))}}bs.create=(e,t)=>new bs({shape:()=>e,unknownKeys:"strip",catchall:vs.create(),typeName:Us.ZodObject,...Dt(t)}),bs.strictCreate=(e,t)=>new bs({shape:()=>e,unknownKeys:"strict",catchall:vs.create(),typeName:Us.ZodObject,...Dt(t)}),bs.lazycreate=(e,t)=>new bs({shape:e,unknownKeys:"strip",catchall:vs.create(),typeName:Us.ZodObject,...Dt(t)});class Ns extends $t{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;if(t.common.async)return Promise.all(s.map(async e=>{const s={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const s=e.map(e=>new _t(e.ctx.common.issues));return wt(t,{code:jt.invalid_union,unionErrors:s}),Ct});{let e;const r=[];for(const n of s){const s={...t,common:{...t.common,issues:[]},parent:null},a=n._parseSync({data:t.data,path:t.path,parent:s});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:s}),s.common.issues.length&&r.push(s.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=r.map(e=>new _t(e));return wt(t,{code:jt.invalid_union,unionErrors:a}),Ct}}get options(){return this._def.options}}function ws(e,t){const s=yt(e),r=yt(t);if(e===t)return{valid:!0,data:e};if(s===vt.object&&r===vt.object){const s=xt.objectKeys(t),r=xt.objectKeys(e).filter(e=>-1!==s.indexOf(e)),a={...e,...t};for(const n of r){const s=ws(e[n],t[n]);if(!s.valid)return{valid:!1};a[n]=s.data}return{valid:!0,data:a}}if(s===vt.array&&r===vt.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let r=0;r<e.length;r++){const a=ws(e[r],t[r]);if(!a.valid)return{valid:!1};s.push(a.data)}return{valid:!0,data:s}}return s===vt.date&&r===vt.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}Ns.create=(e,t)=>new Ns({options:e,typeName:Us.ZodUnion,...Dt(t)});class ks extends $t{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=(e,r)=>{if(Et(e)||Et(r))return Ct;const a=ws(e.value,r.value);return a.valid?((Ot(e)||Ot(r))&&t.dirty(),{status:t.value,value:a.data}):(wt(s,{code:jt.invalid_intersection_types}),Ct)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}ks.create=(e,t,s)=>new ks({left:e,right:t,typeName:Us.ZodIntersection,...Dt(s)});class Cs extends $t{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==vt.array)return wt(s,{code:jt.invalid_type,expected:vt.array,received:s.parsedType}),Ct;if(s.data.length<this._def.items.length)return wt(s,{code:jt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ct;!this._def.rest&&s.data.length>this._def.items.length&&(wt(s,{code:jt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...s.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Rt(s,e,s.path,t)):null}).filter(e=>!!e);return s.common.async?Promise.all(r).then(e=>kt.mergeArray(t,e)):kt.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Cs({...this._def,rest:e})}}Cs.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Cs({items:e,typeName:Us.ZodTuple,rest:null,...Dt(t)})};class Ss extends $t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==vt.map)return wt(s,{code:jt.invalid_type,expected:vt.map,received:s.parsedType}),Ct;const r=this._def.keyType,a=this._def.valueType,n=[...s.data.entries()].map(([e,t],n)=>({key:r._parse(new Rt(s,e,s.path,[n,"key"])),value:a._parse(new Rt(s,t,s.path,[n,"value"]))}));if(s.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const s of n){const r=await s.key,a=await s.value;if("aborted"===r.status||"aborted"===a.status)return Ct;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}})}{const e=new Map;for(const s of n){const r=s.key,a=s.value;if("aborted"===r.status||"aborted"===a.status)return Ct;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}}Ss.create=(e,t,s)=>new Ss({valueType:t,keyType:e,typeName:Us.ZodMap,...Dt(s)});class Ts extends $t{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==vt.set)return wt(s,{code:jt.invalid_type,expected:vt.set,received:s.parsedType}),Ct;const r=this._def;null!==r.minSize&&s.data.size<r.minSize.value&&(wt(s,{code:jt.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&s.data.size>r.maxSize.value&&(wt(s,{code:jt.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function n(e){const s=new Set;for(const r of e){if("aborted"===r.status)return Ct;"dirty"===r.status&&t.dirty(),s.add(r.value)}return{status:t.value,value:s}}const i=[...s.data.values()].map((e,t)=>a._parse(new Rt(s,e,s.path,t)));return s.common.async?Promise.all(i).then(e=>n(e)):n(i)}min(e,t){return new Ts({...this._def,minSize:{value:e,message:Pt.toString(t)}})}max(e,t){return new Ts({...this._def,maxSize:{value:e,message:Pt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ts.create=(e,t)=>new Ts({valueType:e,minSize:null,maxSize:null,typeName:Us.ZodSet,...Dt(t)});class Es extends $t{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Es.create=(e,t)=>new Es({getter:e,typeName:Us.ZodLazy,...Dt(t)});class Os extends $t{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return wt(t,{received:t.data,code:jt.invalid_literal,expected:this._def.value}),Ct}return{status:"valid",value:e.data}}get value(){return this._def.value}}function As(e,t){return new Zs({values:e,typeName:Us.ZodEnum,...Dt(t)})}Os.create=(e,t)=>new Os({value:e,typeName:Us.ZodLiteral,...Dt(t)});class Zs extends $t{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),s=this._def.values;return wt(t,{expected:xt.joinValues(s),received:t.parsedType,code:jt.invalid_type}),Ct}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return wt(t,{received:t.data,code:jt.invalid_enum_value,options:s}),Ct}return Tt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Zs.create(e,{...this._def,...t})}exclude(e,t=this._def){return Zs.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}Zs.create=As;class Ps extends $t{_parse(e){const t=xt.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==vt.string&&s.parsedType!==vt.number){const e=xt.objectValues(t);return wt(s,{expected:xt.joinValues(e),received:s.parsedType,code:jt.invalid_type}),Ct}if(this._cache||(this._cache=new Set(xt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=xt.objectValues(t);return wt(s,{received:s.data,code:jt.invalid_enum_value,options:e}),Ct}return Tt(e.data)}get enum(){return this._def.values}}Ps.create=(e,t)=>new Ps({values:e,typeName:Us.ZodNativeEnum,...Dt(t)});class Rs extends $t{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==vt.promise&&!1===t.common.async)return wt(t,{code:jt.invalid_type,expected:vt.promise,received:t.parsedType}),Ct;const s=t.parsedType===vt.promise?t.data:Promise.resolve(t.data);return Tt(s.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Rs.create=(e,t)=>new Rs({type:e,typeName:Us.ZodPromise,...Dt(t)});class Is extends $t{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Us.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{wt(s,e),e.fatal?t.abort():t.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type){const e=r.transform(s.data,a);if(s.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return Ct;const r=await this._def.schema._parseAsync({data:e,path:s.path,parent:s});return"aborted"===r.status?Ct:"dirty"===r.status||"dirty"===t.value?St(r.value):r});{if("aborted"===t.value)return Ct;const r=this._def.schema._parseSync({data:e,path:s.path,parent:s});return"aborted"===r.status?Ct:"dirty"===r.status||"dirty"===t.value?St(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,a);if(s.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===s.common.async){const r=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===r.status?Ct:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(s=>"aborted"===s.status?Ct:("dirty"===s.status&&t.dirty(),e(s.value).then(()=>({status:t.value,value:s.value}))))}if("transform"===r.type){if(!1===s.common.async){const e=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!At(e))return Ct;const n=r.transform(e.value,a);if(n instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(e=>At(e)?Promise.resolve(r.transform(e.value,a)).then(e=>({status:t.value,value:e})):Ct)}xt.assertNever(r)}}Is.create=(e,t,s)=>new Is({schema:e,typeName:Us.ZodEffects,effect:t,...Dt(s)}),Is.createWithPreprocess=(e,t,s)=>new Is({schema:t,effect:{type:"preprocess",transform:e},typeName:Us.ZodEffects,...Dt(s)});class Ds extends $t{_parse(e){return this._getType(e)===vt.undefined?Tt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ds.create=(e,t)=>new Ds({innerType:e,typeName:Us.ZodOptional,...Dt(t)});class $s extends $t{_parse(e){return this._getType(e)===vt.null?Tt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$s.create=(e,t)=>new $s({innerType:e,typeName:Us.ZodNullable,...Dt(t)});class Ls extends $t{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===vt.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ls.create=(e,t)=>new Ls({innerType:e,typeName:Us.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Dt(t)});class zs extends $t{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Zt(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new _t(s.common.issues)},input:s.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new _t(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}zs.create=(e,t)=>new zs({innerType:e,typeName:Us.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Dt(t)});class Fs extends $t{_parse(e){if(this._getType(e)!==vt.nan){const t=this._getOrReturnCtx(e);return wt(t,{code:jt.invalid_type,expected:vt.nan,received:t.parsedType}),Ct}return{status:"valid",value:e.data}}}Fs.create=e=>new Fs({typeName:Us.ZodNaN,...Dt(e)});class Ms extends $t{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Vs extends $t{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?Ct:"dirty"===e.status?(t.dirty(),St(e.value)):this._def.out._parseAsync({data:e.value,path:s.path,parent:s})})()}{const e=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?Ct:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:s.path,parent:s})}}static create(e,t){return new Vs({in:e,out:t,typeName:Us.ZodPipeline})}}class qs extends $t{_parse(e){const t=this._def.innerType._parse(e),s=e=>(At(e)&&(e.value=Object.freeze(e.value)),e);return Zt(t)?t.then(e=>s(e)):s(t)}unwrap(){return this._def.innerType}}var Us;qs.create=(e,t)=>new qs({innerType:e,typeName:Us.ZodReadonly,...Dt(t)}),bs.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Us||(Us={}));const Bs=os.create,Ws=cs.create;vs.create,js.create;const Ks=bs.create;bs.strictCreate,Ns.create,ks.create,Cs.create,Zs.create,Rs.create,Ds.create,$s.create;const Hs=x,Ys=u.createContext({}),Xs=({...t})=>e.jsx(Ys.Provider,{value:{name:t.name},children:e.jsx(g,{...t})}),Js=()=>{const e=u.useContext(Ys),t=u.useContext(Gs),{getFieldState:s,formState:r}=j(),a=s(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:n}=t;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...a}},Gs=u.createContext({}),Qs=u.forwardRef(({className:t,...s},r)=>{const a=u.useId();return e.jsx(Gs.Provider,{value:{id:a},children:e.jsx("div",{ref:r,className:v("space-y-2",t),...s})})});Qs.displayName="FormItem";const er=u.forwardRef(({className:t,...s},r)=>{const{error:a,formItemId:n}=Js();return e.jsx(y,{ref:r,className:v(a&&"text-destructive",t),htmlFor:n,...s})});er.displayName="FormLabel";const tr=u.forwardRef(({...s},r)=>{const{error:a,formItemId:n,formDescriptionId:i,formMessageId:o}=Js();return e.jsx(t,{ref:r,id:n,"aria-describedby":a?`${i} ${o}`:`${i}`,"aria-invalid":!!a,...s})});tr.displayName="FormControl";u.forwardRef(({className:t,...s},r)=>{const{formDescriptionId:a}=Js();return e.jsx("p",{ref:r,id:a,className:v("text-[0.8rem] text-muted-foreground dark:text-gray-300",t),...s})}).displayName="FormDescription";const sr=u.forwardRef(({className:t,children:s,...r},a)=>{const{error:n,formMessageId:i}=Js(),o=n?String(n?.message??""):s;return o?e.jsx("p",{ref:a,id:i,className:v("text-[0.8rem] font-medium text-destructive dark:text-red-400",t),...r,children:o}):null});sr.displayName="FormMessage";const rr=Ks({name:Bs().min(1,"اسم العنصر مطلوب"),description:Bs().optional(),category:Bs().min(1,"الفئة مطلوبة"),quantity:Ws().min(0,"الكمية يجب أن تكون صفر أو أكثر"),unit:Bs().optional(),cost_per_unit:Ws().min(0,"التكلفة يجب أن تكون صفر أو أكثر").optional(),supplier:Bs().optional(),expiry_date:Bs().optional(),minimum_stock:Ws().min(0,"الحد الأدنى يجب أن يكون صفر أو أكثر")}),ar=["أدوات طبية","مواد استهلاكية","أدوية","مواد حشو","معدات تعقيم","مواد تجميل","أدوات جراحة","مواد تنظيف","معدات تشخيص","مواد وقاية"],nr=["قطعة","علبة","زجاجة","أنبوب","كيس","لتر","مل","جرام","كيلو","متر"];function ir({isOpen:t,onClose:s,onSave:r,categories:a,suppliers:n}){const{toast:i}=_(),[o,l]=u.useState(!1),[c,d]=u.useState(""),[m,h]=u.useState(""),p=b({resolver:ft(rr),defaultValues:{name:"",description:"",category:"",quantity:0,unit:"",cost_per_unit:0,supplier:"",expiry_date:"",minimum_stock:0}}),f=()=>{p.reset(),d(""),h(""),s()},x=[...new Set([...ar,...a])],g=[...new Set(n)];return e.jsx(N,{open:t,onOpenChange:f,children:e.jsxs(w,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",dir:"rtl",children:[e.jsxs(k,{children:[e.jsx(C,{className:"text-xl font-bold text-foreground",children:"إضافة عنصر مخزون جديد"}),e.jsx(S,{children:"أدخل تفاصيل العنصر الجديد في المخزون"})]}),e.jsx(Hs,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(async e=>{l(!0);try{const t={...e,category:c||e.category,supplier:m||e.supplier};await r(t),p.reset(),d(""),h(""),s(),i({title:"نجح",description:"تم إضافة العنصر بنجاح"})}catch(t){console.error("Error adding inventory item:",t),i({title:"خطأ",description:"فشل في إضافة العنصر. يرجى المحاولة مرة أخرى",variant:"destructive"})}finally{l(!1)}}),className:"space-y-4",children:[e.jsx(Xs,{control:p.control,name:"name",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"اسم العنصر *"}),e.jsx(tr,{children:e.jsx(T,{placeholder:"مثال: قفازات طبية",...t,className:"text-right"})}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:p.control,name:"description",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الوصف"}),e.jsx(tr,{children:e.jsx(E,{placeholder:"وصف مختصر للعنصر...",...t,className:"text-right resize-none",rows:2})}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:p.control,name:"category",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الفئة *"}),e.jsxs(O,{onValueChange:t.onChange,value:t.value,children:[e.jsx(tr,{children:e.jsx(A,{children:e.jsx(Z,{placeholder:"اختر الفئة"})})}),e.jsxs(P,{children:[x.map(t=>e.jsx(R,{value:t,children:t},t)),e.jsx(R,{value:"custom",children:"فئة جديدة..."})]})]}),"custom"===t.value&&e.jsx(T,{placeholder:"أدخل اسم الفئة الجديدة",value:c,onChange:e=>d(e.target.value),className:"mt-2 text-right"}),e.jsx(sr,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Xs,{control:p.control,name:"quantity",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الكمية *"}),e.jsx(tr,{children:e.jsx(T,{type:"number",min:"0",placeholder:"0",...t,onChange:e=>{const s=e.target.value;t.onChange(""===s?0:Number(s))},onBlur:e=>{const s=Number(e.target.value)||0;t.onChange(s)},className:"text-right"})}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:p.control,name:"unit",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الوحدة"}),e.jsxs(O,{onValueChange:t.onChange,value:t.value,children:[e.jsx(tr,{children:e.jsx(A,{children:e.jsx(Z,{placeholder:"اختر الوحدة"})})}),e.jsx(P,{children:nr.map(t=>e.jsx(R,{value:t,children:t},t))})]}),e.jsx(sr,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Xs,{control:p.control,name:"cost_per_unit",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"تكلفة الوحدة "}),e.jsx(tr,{children:e.jsx(T,{type:"number",min:"0",step:"0.1",placeholder:"0.00",...t,onChange:e=>{const s=e.target.value;t.onChange(""===s?0:Number(s))},onBlur:e=>{const s=Number(e.target.value)||0;t.onChange(s)},className:"text-right"})}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:p.control,name:"minimum_stock",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الحد الأدنى *"}),e.jsx(tr,{children:e.jsx(T,{type:"number",min:"0",placeholder:"0",...t,onChange:e=>t.onChange(Number(e.target.value)),className:"text-right"})}),e.jsx(sr,{})]})})]}),e.jsx(Xs,{control:p.control,name:"supplier",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"المورد"}),e.jsxs(O,{onValueChange:t.onChange,value:t.value,children:[e.jsx(tr,{children:e.jsx(A,{children:e.jsx(Z,{placeholder:"اختر المورد"})})}),e.jsxs(P,{children:[g.map(t=>e.jsx(R,{value:t,children:t},t)),e.jsx(R,{value:"custom",children:"مورد جديد..."})]})]}),"custom"===t.value&&e.jsx(T,{placeholder:"أدخل اسم المورد الجديد",value:m,onChange:e=>h(e.target.value),className:"mt-2 text-right"}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:p.control,name:"expiry_date",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"تاريخ انتهاء الصلاحية"}),e.jsx(tr,{children:e.jsx(T,{type:"date",...t,className:"text-right"})}),e.jsx(sr,{})]})}),e.jsxs(I,{className:"gap-2",children:[e.jsx(D,{type:"button",variant:"outline",onClick:f,disabled:o,children:"إلغاء"}),e.jsxs(D,{type:"submit",disabled:o,children:[o&&e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"إضافة العنصر"]})]})]})})]})})}const or=Ks({name:Bs().min(1,"اسم العنصر مطلوب"),description:Bs().optional(),category:Bs().min(1,"الفئة مطلوبة"),quantity:Ws().min(0,"الكمية يجب أن تكون صفر أو أكثر"),unit:Bs().optional(),cost_per_unit:Ws().min(0,"التكلفة يجب أن تكون صفر أو أكثر").optional(),supplier:Bs().optional(),expiry_date:Bs().optional(),minimum_stock:Ws().min(0,"الحد الأدنى يجب أن يكون صفر أو أكثر")}),lr=["أدوات طبية","مواد استهلاكية","أدوية","مواد حشو","معدات تعقيم","مواد تجميل","أدوات جراحة","مواد تنظيف","معدات تشخيص","مواد وقاية"],cr=["قطعة","علبة","زجاجة","أنبوب","كيس","لتر","مل","جرام","كيلو","متر"];function dr({isOpen:t,onClose:s,onSave:r,item:a,categories:n,suppliers:i}){const{toast:o}=_(),[l,c]=u.useState(!1),[d,m]=u.useState(""),[h,p]=u.useState(""),f=b({resolver:ft(or),defaultValues:{name:"",description:"",category:"",quantity:0,unit:"",cost_per_unit:0,supplier:"",expiry_date:"",minimum_stock:0}});u.useEffect(()=>{a&&t&&(f.reset({name:a.name||"",description:a.description||"",category:a.category||"",quantity:a.quantity||0,unit:a.unit||"",cost_per_unit:a.cost_per_unit||0,supplier:a.supplier||"",expiry_date:a.expiry_date||"",minimum_stock:a.minimum_stock||0}),m(""),p(""))},[a,t,f]);const x=()=>{f.reset(),m(""),p(""),s()},g=[...new Set([...lr,...n])],v=[...new Set(i)];return a?e.jsx(N,{open:t,onOpenChange:x,children:e.jsxs(w,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(k,{children:[e.jsx(C,{className:"text-xl font-bold text-foreground",children:"تعديل عنصر المخزون"}),e.jsxs(S,{children:["تعديل تفاصيل العنصر: ",a.name]})]}),e.jsx(Hs,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(async e=>{if(a){c(!0);try{const t={...e,category:d||e.category,supplier:h||e.supplier};await r(a.id,t),s(),o({title:"نجح",description:"تم تحديث العنصر بنجاح"})}catch(t){console.error("Error updating inventory item:",t),o({title:"خطأ",description:"فشل في تحديث العنصر. يرجى المحاولة مرة أخرى",variant:"destructive"})}finally{c(!1)}}}),className:"space-y-4",children:[e.jsx(Xs,{control:f.control,name:"name",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"اسم العنصر *"}),e.jsx(tr,{children:e.jsx(T,{placeholder:"مثال: قفازات طبية",...t,className:"text-right"})}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:f.control,name:"description",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الوصف"}),e.jsx(tr,{children:e.jsx(E,{placeholder:"وصف مختصر للعنصر...",...t,className:"text-right resize-none",rows:2})}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:f.control,name:"category",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الفئة *"}),e.jsxs(O,{onValueChange:t.onChange,value:t.value,children:[e.jsx(tr,{children:e.jsx(A,{children:e.jsx(Z,{placeholder:"اختر الفئة"})})}),e.jsxs(P,{children:[g.map(t=>e.jsx(R,{value:t,children:t},t)),e.jsx(R,{value:"custom",children:"فئة جديدة..."})]})]}),"custom"===t.value&&e.jsx(T,{placeholder:"أدخل اسم الفئة الجديدة",value:d,onChange:e=>m(e.target.value),className:"mt-2 text-right"}),e.jsx(sr,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Xs,{control:f.control,name:"quantity",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الكمية *"}),e.jsx(tr,{children:e.jsx(T,{type:"number",min:"0",placeholder:"0",...t,onChange:e=>{const s=e.target.value;t.onChange(""===s?0:Number(s))},onBlur:e=>{const s=Number(e.target.value)||0;t.onChange(s)},className:"text-right"})}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:f.control,name:"unit",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الوحدة"}),e.jsxs(O,{onValueChange:t.onChange,value:t.value,children:[e.jsx(tr,{children:e.jsx(A,{children:e.jsx(Z,{placeholder:"اختر الوحدة"})})}),e.jsx(P,{children:cr.map(t=>e.jsx(R,{value:t,children:t},t))})]}),e.jsx(sr,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Xs,{control:f.control,name:"cost_per_unit",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"تكلفة الوحدة"}),e.jsx(tr,{children:e.jsx(T,{type:"number",min:"0",step:"0.1",placeholder:"0.00",...t,onChange:e=>{const s=e.target.value;t.onChange(""===s?0:Number(s))},onBlur:e=>{const s=Number(e.target.value)||0;t.onChange(s)},className:"text-right"})}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:f.control,name:"minimum_stock",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الحد الأدنى *"}),e.jsx(tr,{children:e.jsx(T,{type:"number",min:"0",placeholder:"0",...t,onChange:e=>t.onChange(Number(e.target.value)),className:"text-right"})}),e.jsx(sr,{})]})})]}),e.jsx(Xs,{control:f.control,name:"supplier",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"المورد"}),e.jsxs(O,{onValueChange:t.onChange,value:t.value,children:[e.jsx(tr,{children:e.jsx(A,{children:e.jsx(Z,{placeholder:"اختر المورد"})})}),e.jsxs(P,{children:[v.map(t=>e.jsx(R,{value:t,children:t},t)),e.jsx(R,{value:"custom",children:"مورد جديد..."})]})]}),"custom"===t.value&&e.jsx(T,{placeholder:"أدخل اسم المورد الجديد",value:h,onChange:e=>p(e.target.value),className:"mt-2 text-right"}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:f.control,name:"expiry_date",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"تاريخ انتهاء الصلاحية"}),e.jsx(tr,{children:e.jsx(T,{type:"date",...t,className:"text-right"})}),e.jsx(sr,{})]})}),e.jsxs(I,{className:"gap-2",children:[e.jsx(D,{type:"button",variant:"outline",onClick:x,disabled:l,children:"إلغاء"}),e.jsxs(D,{type:"submit",disabled:l,children:[l&&e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"حفظ التغييرات"]})]})]})})]})}):null}function ur({isOpen:t,onClose:s,onConfirm:r,item:a,isLoading:n=!1}){const{toast:i}=_(),[o,l]=u.useState(!1);return a?e.jsx(L,{open:t,onOpenChange:s,children:e.jsxs(z,{className:"sm:max-w-[425px]",dir:"rtl",children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:e.jsx(M,{className:"h-6 w-6 text-destructive"})}),e.jsx("div",{children:e.jsx(V,{className:"text-lg font-semibold text-foreground",children:"تأكيد حذف العنصر"})})]})}),e.jsx(q,{className:"text-right text-muted-foreground",children:"هل أنت متأكد من حذف العنصر التالي من المخزون؟"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-foreground",children:a.name}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"الاسم:"})]}),a.category&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:a.category}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"الفئة:"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-sm",children:[a.quantity," ",a.unit||"قطعة"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"الكمية:"})]}),a.supplier&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:a.supplier}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"المورد:"})]})]}),e.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-destructive font-medium",children:"⚠️ تحذير: هذا الإجراء لا يمكن التراجع عنه"}),e.jsx("p",{className:"text-xs text-destructive/80 mt-1",children:"سيتم حذف العنصر وجميع سجلات الاستخدام المرتبطة به نهائياً"})]})]}),e.jsxs(U,{className:"gap-2",children:[e.jsx(B,{onClick:s,disabled:o||n,className:"flex-1",children:"إلغاء"}),e.jsxs(W,{onClick:async()=>{if(a){l(!0);try{await r(a.id),s(),i({title:"نجح",description:"تم حذف العنصر بنجاح"})}catch(e){console.error("Error deleting inventory item:",e),i({title:"خطأ",description:"فشل في حذف العنصر. يرجى المحاولة مرة أخرى",variant:"destructive"})}finally{l(!1)}}},disabled:o||n,className:"flex-1 bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[(o||n)&&e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"حذف العنصر"]})]})]})}):null}const mr=Ks({quantity_used:Ws().min(1,"الكمية المستخدمة يجب أن تكون أكبر من صفر"),appointment_id:Bs().optional(),notes:Bs().optional(),usage_date:Bs().min(1,"تاريخ الاستخدام مطلوب")});function hr({isOpen:t,onClose:s,onSave:r,item:a,appointments:n}){const{toast:i}=_(),[o,l]=u.useState(!1),c=b({resolver:ft(mr),defaultValues:{quantity_used:1,appointment_id:"",notes:"",usage_date:(new Date).toISOString().split("T")[0]}}),d=()=>{c.reset(),s()};if(!a)return null;const m=(new Date).toISOString().split("T")[0],h=n.filter(e=>e.start_time.startsWith(m)),p=a.quantity<=a.minimum_stock,f=0===a.quantity;return e.jsx(N,{open:t,onOpenChange:d,children:e.jsxs(w,{className:"sm:max-w-[500px]",dir:"rtl",children:[e.jsxs(k,{children:[e.jsx(C,{className:"text-xl font-bold text-foreground",children:"تسجيل استخدام المواد"}),e.jsxs(S,{children:["تسجيل استخدام: ",a.name]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-foreground",children:a.name}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"العنصر:"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-sm",children:[a.quantity," ",a.unit||"قطعة"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"الكمية المتوفرة:"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:a.minimum_stock}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"الحد الأدنى:"})]})]}),f&&e.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-destructive"}),e.jsx("p",{className:"text-sm text-destructive font-medium",children:"تحذير: نفد المخزون من هذا العنصر"})]})}),p&&!f&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 font-medium",children:"تحذير: المخزون منخفض (أقل من الحد الأدنى)"})]})}),e.jsx(Hs,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(async e=>{if(a)if(e.quantity_used>a.quantity)i({title:"خطأ",description:`الكمية المطلوبة (${e.quantity_used}) أكبر من الكمية المتوفرة (${a.quantity})`,variant:"destructive"});else{l(!0);try{const t={inventory_id:a.id,quantity_used:e.quantity_used,appointment_id:e.appointment_id||void 0,notes:e.notes||void 0,usage_date:e.usage_date};await r(t),c.reset({quantity_used:1,appointment_id:"",notes:"",usage_date:(new Date).toISOString().split("T")[0]}),s(),i({title:"نجح",description:"تم تسجيل الاستخدام بنجاح"})}catch(t){console.error("Error recording usage:",t),i({title:"خطأ",description:"فشل في تسجيل الاستخدام. يرجى المحاولة مرة أخرى",variant:"destructive"})}finally{l(!1)}}}),className:"space-y-4",children:[e.jsx(Xs,{control:c.control,name:"quantity_used",render:({field:t})=>e.jsxs(Qs,{children:[e.jsxs(er,{className:"text-sm font-medium",children:["الكمية المستخدمة * (",a.unit||"قطعة",")"]}),e.jsx(tr,{children:e.jsx(T,{type:"number",min:"1",max:a.quantity,placeholder:"1",...t,onChange:e=>{const s=e.target.value;t.onChange(""===s?1:Number(s))},onBlur:e=>{const s=Number(e.target.value)||1;t.onChange(s)},className:"text-right",disabled:f})}),e.jsx(sr,{}),t.value>a.quantity&&e.jsxs("p",{className:"text-sm text-destructive",children:["الكمية المطلوبة أكبر من المتوفر (",a.quantity,")"]})]})}),e.jsx(Xs,{control:c.control,name:"usage_date",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"تاريخ الاستخدام *"}),e.jsx(tr,{children:e.jsx(T,{type:"date",...t,className:"text-right"})}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:c.control,name:"appointment_id",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"الموعد المرتبط (اختياري)"}),e.jsxs(O,{onValueChange:t.onChange,value:t.value,children:[e.jsx(tr,{children:e.jsx(A,{children:e.jsx(Z,{placeholder:"اختر الموعد"})})}),e.jsxs(P,{children:[e.jsx(R,{value:"none",children:"بدون موعد محدد"}),h.map(t=>e.jsxs(R,{value:t.id,children:[t.title," - ",t.patient?.first_name," ",t.patient?.last_name]},t.id)),n.filter(e=>!e.start_time.startsWith(m)).slice(0,10).map(t=>e.jsxs(R,{value:t.id,children:[t.title," - ",t.patient?.first_name," ",t.patient?.last_name,e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",(()=>{const e=new Date(t.start_time);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}`})(),")"]})]},t.id))]})]}),e.jsx(sr,{})]})}),e.jsx(Xs,{control:c.control,name:"notes",render:({field:t})=>e.jsxs(Qs,{children:[e.jsx(er,{className:"text-sm font-medium",children:"ملاحظات"}),e.jsx(tr,{children:e.jsx(E,{placeholder:"ملاحظات حول الاستخدام...",...t,className:"text-right resize-none",rows:3})}),e.jsx(sr,{})]})}),e.jsxs(I,{className:"gap-2",children:[e.jsx(D,{type:"button",variant:"outline",onClick:d,disabled:o,children:"إلغاء"}),e.jsxs(D,{type:"submit",disabled:o||f||c.watch("quantity_used")>a.quantity,children:[o&&e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"تسجيل الاستخدام"]})]})]})})]})})}function pr({items:t,onRefresh:s,onItemClick:r}){const[a,n]=u.useState(!0),[i,o]=u.useState(!0),[l,c]=u.useState(!0),d=new Date,m=t.filter(e=>e.quantity<=e.minimum_stock&&e.quantity>0),h=t.filter(e=>0===e.quantity),p=t.filter(e=>e.expiry_date&&new Date(e.expiry_date)<d),f=t.filter(e=>{if(!e.expiry_date)return!1;const t=new Date(e.expiry_date),s=Math.ceil((t.getTime()-d.getTime())/864e5);return s<=30&&s>0}),{formatAmount:x}=K(),g=e=>{const t=new Date(e);return Math.ceil((t.getTime()-d.getTime())/864e5)},v=({title:t,items:s,icon:a,color:n,isVisible:i,onToggle:o,emptyMessage:l})=>e.jsx(H,{className:`border-l-4 ${n}`,children:e.jsxs(be,{open:i,onOpenChange:o,children:[e.jsx(G,{className:"pb-3",children:e.jsx(Ne,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a,e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg font-semibold",children:t}),e.jsxs(ee,{children:[s.length," عنصر"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{variant:"secondary",className:"text-sm",children:s.length}),i?e.jsx(se,{className:"h-4 w-4"}):e.jsx(re,{className:"h-4 w-4"})]})]})})}),e.jsx(we,{children:e.jsx(Y,{className:"pt-0",children:0===s.length?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:l}):e.jsx("div",{className:"space-y-3",children:s.map(t=>e.jsx("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>r?.(t),children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-foreground",children:t.name}),e.jsx("div",{className:"text-left",children:t.category&&e.jsx(te,{variant:"outline",className:"text-xs",children:t.category})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-sm text-muted-foreground",children:[e.jsxs("div",{children:["الكمية: ",t.quantity," ",t.unit||"قطعة",t.minimum_stock>0&&e.jsxs("span",{className:"mr-2",children:["(الحد الأدنى: ",t.minimum_stock,")"]})]}),t.expiry_date&&e.jsx("div",{className:"text-left",children:p.includes(t)?e.jsx("span",{className:"text-destructive font-medium",children:"منتهي الصلاحية"}):f.includes(t)?e.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400 font-medium",children:["ينتهي خلال ",g(t.expiry_date)," يوم"]}):e.jsxs("span",{children:["ينتهي: ",(()=>{const e=new Date(t.expiry_date);return`${e.getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getFullYear()}`})()]})})]}),t.cost_per_unit&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["القيمة الإجمالية: ",x(t.quantity*t.cost_per_unit)]})]})},t.id))})})})]})}),y=m.length+h.length+p.length+f.length;return 0===y?e.jsx(H,{className:"border-green-200 dark:border-green-800",children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"h-12 w-12 mx-auto mb-3 text-green-500"}),e.jsx("h3",{className:"text-lg font-semibold text-green-700 dark:text-green-400 mb-2",children:"لا توجد تنبيهات"}),e.jsx("p",{className:"text-green-600 dark:text-green-300",children:"جميع عناصر المخزون في حالة جيدة"}),s&&e.jsxs(D,{variant:"outline",size:"sm",onClick:s,className:"mt-3",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"تحديث"]})]})})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"تنبيهات المخزون"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[y," تنبيه يتطلب انتباهك"]})]}),s&&e.jsxs(D,{variant:"outline",size:"sm",onClick:s,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"تحديث"]})]}),h.length>0&&e.jsx(v,{title:"نفد المخزون",items:h,icon:e.jsx(M,{className:"h-5 w-5 text-destructive"}),color:"border-l-destructive",isVisible:i,onToggle:()=>o(!i),emptyMessage:"لا توجد عناصر نفد مخزونها"}),m.length>0&&e.jsx(v,{title:"مخزون منخفض",items:m,icon:e.jsx(ke,{className:"h-5 w-5 text-yellow-600"}),color:"border-l-yellow-500",isVisible:a,onToggle:()=>n(!a),emptyMessage:"لا توجد عناصر بمخزون منخفض"}),p.length>0&&e.jsx(v,{title:"منتهية الصلاحية",items:p,icon:e.jsx(J,{className:"h-5 w-5 text-destructive"}),color:"border-l-destructive",isVisible:i,onToggle:()=>o(!i),emptyMessage:"لا توجد عناصر منتهية الصلاحية"}),f.length>0&&e.jsx(v,{title:"تنتهي صلاحيتها قريباً",items:f,icon:e.jsx(J,{className:"h-5 w-5 text-yellow-600"}),color:"border-l-yellow-500",isVisible:l,onToggle:()=>c(!l),emptyMessage:"لا توجد عناصر تنتهي صلاحيتها قريباً"})]})}var fr="ScrollArea",[xr,gr]=s(fr),[vr,yr]=xr(fr),jr=u.forwardRef((t,s)=>{const{__scopeScrollArea:i,type:o="hover",dir:l,scrollHideDelay:c=600,...d}=t,[m,h]=u.useState(null),[p,f]=u.useState(null),[x,g]=u.useState(null),[v,y]=u.useState(null),[j,_]=u.useState(null),[b,N]=u.useState(0),[w,k]=u.useState(0),[C,S]=u.useState(!1),[T,E]=u.useState(!1),O=r(s,e=>h(e)),A=a(l);return e.jsx(vr,{scope:i,type:o,dir:A,scrollHideDelay:c,scrollArea:m,viewport:p,onViewportChange:f,content:x,onContentChange:g,scrollbarX:v,onScrollbarXChange:y,scrollbarXEnabled:C,onScrollbarXEnabledChange:S,scrollbarY:j,onScrollbarYChange:_,scrollbarYEnabled:T,onScrollbarYEnabledChange:E,onCornerWidthChange:N,onCornerHeightChange:k,children:e.jsx(n.div,{dir:A,...d,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})})});jr.displayName=fr;var _r="ScrollAreaViewport",br=u.forwardRef((t,s)=>{const{__scopeScrollArea:a,children:i,nonce:o,...l}=t,c=yr(_r,a),d=u.useRef(null),m=r(s,d,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(n.div,{"data-radix-scroll-area-viewport":"",...l,ref:m,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});br.displayName=_r;var Nr="ScrollAreaScrollbar",wr=u.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=yr(Nr,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=n,l="horizontal"===t.orientation;return u.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),"hover"===n.type?e.jsx(kr,{...a,ref:s,forceMount:r}):"scroll"===n.type?e.jsx(Cr,{...a,ref:s,forceMount:r}):"auto"===n.type?e.jsx(Sr,{...a,ref:s,forceMount:r}):"always"===n.type?e.jsx(Tr,{...a,ref:s}):null});wr.displayName=Nr;var kr=u.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=yr(Nr,t.__scopeScrollArea),[o,l]=u.useState(!1);return u.useEffect(()=>{const e=n.scrollArea;let t=0;if(e){const s=()=>{window.clearTimeout(t),l(!0)},r=()=>{t=window.setTimeout(()=>l(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",r)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(i,{present:r||o,children:e.jsx(Sr,{"data-state":o?"visible":"hidden",...a,ref:s})})}),Cr=u.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=yr(Nr,t.__scopeScrollArea),l="horizontal"===t.orientation,c=Kr(()=>m("SCROLL_END"),100),[d,m]=(h="hidden",p={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},u.useReducer((e,t)=>p[e][t]??e,h));var h,p;return u.useEffect(()=>{if("idle"===d){const e=window.setTimeout(()=>m("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,n.scrollHideDelay,m]),u.useEffect(()=>{const e=n.viewport,t=l?"scrollLeft":"scrollTop";if(e){let s=e[t];const r=()=>{const r=e[t];s!==r&&(m("SCROLL"),c()),s=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[n.viewport,l,m,c]),e.jsx(i,{present:r||"hidden"!==d,children:e.jsx(Tr,{"data-state":"hidden"===d?"hidden":"visible",...a,ref:s,onPointerEnter:o(t.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:o(t.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),Sr=u.forwardRef((t,s)=>{const r=yr(Nr,t.__scopeScrollArea),{forceMount:a,...n}=t,[o,l]=u.useState(!1),c="horizontal"===t.orientation,d=Kr(()=>{if(r.viewport){const e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;l(c?e:t)}},10);return Hr(r.viewport,d),Hr(r.content,d),e.jsx(i,{present:a||o,children:e.jsx(Tr,{"data-state":o?"visible":"hidden",...n,ref:s})})}),Tr=u.forwardRef((t,s)=>{const{orientation:r="vertical",...a}=t,n=yr(Nr,t.__scopeScrollArea),i=u.useRef(null),o=u.useRef(0),[l,c]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Mr(l.viewport,l.content),m={...a,sizes:l,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,s,r="ltr"){const a=Vr(s),n=a/2,i=t||n,o=a-i,l=s.scrollbar.paddingStart+i,c=s.scrollbar.size-s.scrollbar.paddingEnd-o,d=s.content-s.viewport,u="ltr"===r?[0,d]:[-1*d,0];return Ur([l,c],u)(e)}(e,o.current,l,t)}return"horizontal"===r?e.jsx(Er,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){const e=qr(n.viewport.scrollLeft,l,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=h(e,n.dir))}}):"vertical"===r?e.jsx(Or,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){const e=qr(n.viewport.scrollTop,l);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=h(e))}}):null}),Er=u.forwardRef((t,s)=>{const{sizes:a,onSizesChange:n,...i}=t,o=yr(Nr,t.__scopeScrollArea),[l,c]=u.useState(),d=u.useRef(null),m=r(s,d,o.onScrollbarXChange);return u.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(Pr,{"data-orientation":"horizontal",...i,ref:m,sizes:a,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Vr(a)+"px",...t.style},onThumbPointerDown:e=>t.onThumbPointerDown(e.x),onDragScroll:e=>t.onDragScroll(e.x),onWheelScroll:(e,s)=>{if(o.viewport){const r=o.viewport.scrollLeft+e.deltaX;t.onWheelScroll(r),Br(r,s)&&e.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Fr(l.paddingLeft),paddingEnd:Fr(l.paddingRight)}})}})}),Or=u.forwardRef((t,s)=>{const{sizes:a,onSizesChange:n,...i}=t,o=yr(Nr,t.__scopeScrollArea),[l,c]=u.useState(),d=u.useRef(null),m=r(s,d,o.onScrollbarYChange);return u.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(Pr,{"data-orientation":"vertical",...i,ref:m,sizes:a,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Vr(a)+"px",...t.style},onThumbPointerDown:e=>t.onThumbPointerDown(e.y),onDragScroll:e=>t.onDragScroll(e.y),onWheelScroll:(e,s)=>{if(o.viewport){const r=o.viewport.scrollTop+e.deltaY;t.onWheelScroll(r),Br(r,s)&&e.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Fr(l.paddingTop),paddingEnd:Fr(l.paddingBottom)}})}})}),[Ar,Zr]=xr(Nr),Pr=u.forwardRef((t,s)=>{const{__scopeScrollArea:a,sizes:i,hasThumb:c,onThumbChange:d,onThumbPointerUp:m,onThumbPointerDown:h,onThumbPositionChange:p,onDragScroll:f,onWheelScroll:x,onResize:g,...v}=t,y=yr(Nr,a),[j,_]=u.useState(null),b=r(s,e=>_(e)),N=u.useRef(null),w=u.useRef(""),k=y.viewport,C=i.content-i.viewport,S=l(x),T=l(p),E=Kr(g,10);function O(e){if(N.current){const t=e.clientX-N.current.left,s=e.clientY-N.current.top;f({x:t,y:s})}}return u.useEffect(()=>{const e=e=>{const t=e.target,s=j?.contains(t);s&&S(e,C)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[k,j,C,S]),u.useEffect(T,[i,T]),Hr(j,E),Hr(y.content,E),e.jsx(Ar,{scope:a,scrollbar:j,hasThumb:c,onThumbChange:l(d),onThumbPointerUp:l(m),onThumbPositionChange:T,onThumbPointerDown:l(h),children:e.jsx(n.div,{...v,ref:b,style:{position:"absolute",...v.style},onPointerDown:o(t.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),N.current=j.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),O(e)}}),onPointerMove:o(t.onPointerMove,O),onPointerUp:o(t.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=w.current,y.viewport&&(y.viewport.style.scrollBehavior=""),N.current=null})})})}),Rr="ScrollAreaThumb",Ir=u.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=Zr(Rr,t.__scopeScrollArea);return e.jsx(i,{present:r||n.hasThumb,children:e.jsx(Dr,{ref:s,...a})})}),Dr=u.forwardRef((t,s)=>{const{__scopeScrollArea:a,style:i,...l}=t,c=yr(Rr,a),d=Zr(Rr,a),{onThumbPositionChange:m}=d,h=r(s,e=>d.onThumbChange(e)),p=u.useRef(void 0),f=Kr(()=>{p.current&&(p.current(),p.current=void 0)},100);return u.useEffect(()=>{const e=c.viewport;if(e){const t=()=>{if(f(),!p.current){const t=Wr(e,m);p.current=t,m()}};return m(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[c.viewport,f,m]),e.jsx(n.div,{"data-state":d.hasThumb?"visible":"hidden",...l,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:o(t.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;d.onThumbPointerDown({x:s,y:r})}),onPointerUp:o(t.onPointerUp,d.onThumbPointerUp)})});Ir.displayName=Rr;var $r="ScrollAreaCorner",Lr=u.forwardRef((t,s)=>{const r=yr($r,t.__scopeScrollArea),a=Boolean(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&a?e.jsx(zr,{...t,ref:s}):null});Lr.displayName=$r;var zr=u.forwardRef((t,s)=>{const{__scopeScrollArea:r,...a}=t,i=yr($r,r),[o,l]=u.useState(0),[c,d]=u.useState(0),m=Boolean(o&&c);return Hr(i.scrollbarX,()=>{const e=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(e),d(e)}),Hr(i.scrollbarY,()=>{const e=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(e),l(e)}),m?e.jsx(n.div,{...a,ref:s,style:{width:o,height:c,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...t.style}}):null});function Fr(e){return e?parseInt(e,10):0}function Mr(e,t){const s=e/t;return isNaN(s)?0:s}function Vr(e){const t=Mr(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-s)*t;return Math.max(r,18)}function qr(e,t,s="ltr"){const r=Vr(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=t.scrollbar.size-a,i=t.content-t.viewport,o=n-r,l=d(e,"ltr"===s?[0,i]:[-1*i,0]);return Ur([0,i],[0,o])(l)}function Ur(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}function Br(e,t){return e>0&&e<t}var Wr=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const n={left:e.scrollLeft,top:e.scrollTop},i=s.left!==n.left,o=s.top!==n.top;(i||o)&&t(),s=n,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Kr(e,t){const s=l(e),r=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(r.current),[]),u.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function Hr(e,t){const s=l(t);c(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,s])}var Yr=jr,Xr=br,Jr=Lr;const Gr=u.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(Yr,{ref:a,className:v("relative overflow-hidden",t),...r,children:[e.jsx(Xr,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Qr,{}),e.jsx(Jr,{})]}));Gr.displayName=Yr.displayName;const Qr=u.forwardRef(({className:t,orientation:s="vertical",...r},a)=>e.jsx(wr,{ref:a,orientation:s,className:v("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(Ir,{className:"relative flex-1 rounded-full bg-border"})}));function ea({isOpen:t,onClose:s,item:r}){const[a,n]=u.useState([]),[i,o]=u.useState(!1),{getUsageHistory:l}=ae();u.useEffect(()=>{r&&t&&c()},[r,t]);const c=async()=>{if(r){o(!0);try{const e=l(r.id);n(e)}catch(e){console.error("Error loading usage history:",e)}finally{o(!1)}}},d=e=>{const t=new Date(e),s=t.getDate(),r=t.getMonth()+1,a=t.getFullYear(),n=t.getHours(),i=t.getMinutes();return`${s.toString().padStart(2,"0")}/${r.toString().padStart(2,"0")}/${a} ${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},m=()=>a.reduce((e,t)=>e+t.quantity_used,0);return r?e.jsx(N,{open:t,onOpenChange:s,children:e.jsxs(w,{className:"sm:max-w-[700px] max-h-[80vh]",dir:"rtl",children:[e.jsxs(k,{children:[e.jsxs(C,{className:"text-xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),"تاريخ الاستخدام"]}),e.jsxs(S,{children:["تاريخ استخدام: ",r.name]})]}),e.jsxs(H,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs(Q,{className:"text-lg flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"معلومات العنصر"]})}),e.jsx(Y,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"الكمية الحالية"}),e.jsxs("p",{className:"font-medium",children:[r.quantity," ",r.unit||"قطعة"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"إجمالي المستخدم"}),e.jsxs("p",{className:"font-medium",children:[m()," ",r.unit||"قطعة"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"عدد مرات الاستخدام"}),e.jsx("p",{className:"font-medium",children:a.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"الفئة"}),e.jsx("p",{className:"font-medium",children:r.category||"غير محدد"})]})]})})]}),e.jsxs(H,{className:"flex-1",children:[e.jsxs(G,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"text-lg flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"سجل الاستخدام"]}),e.jsxs(D,{variant:"outline",size:"sm",onClick:c,disabled:i,children:[e.jsx(X,{className:"h-4 w-4 mr-2 "+(i?"animate-spin":"")}),"تحديث"]})]}),e.jsxs(ee,{children:[a.length," سجل استخدام"]})]}),e.jsx(Y,{children:e.jsx(Gr,{className:"h-[300px] w-full",children:i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"جاري التحميل..."})]}):0===a.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ne,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"لا يوجد سجل استخدام"}),e.jsx("p",{className:"text-muted-foreground",children:"لم يتم تسجيل أي استخدام لهذا العنصر بعد"})]}):e.jsx("div",{className:"space-y-3",children:a.map((t,s)=>e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(te,{variant:"secondary",className:"text-xs",children:[t.quantity_used," ",r.unit||"قطعة"]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:d(t.usage_date)})]})}),t.appointment_id&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mb-1",children:[e.jsx(ie,{className:"h-3 w-3"}),e.jsx("span",{children:"مرتبط بموعد"})]}),t.notes&&e.jsxs("div",{className:"flex items-start gap-1 text-sm",children:[e.jsx(Ce,{className:"h-3 w-3 mt-0.5 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:t.notes})]})]})]},t.id||s))})})})]}),a.length>0&&e.jsx(H,{children:e.jsx(Y,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:m()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"إجمالي المستخدم"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:a.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"مرات الاستخدام"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:a.length>0?Math.round(m()/a.length*10)/10:0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"متوسط الاستخدام"})]})]})})})]})}):null}function ta({items:t,isLoading:s,onEdit:r,onDelete:a,onViewDetails:n}){_();const{formatAmount:i}=K(),[o,l]=u.useState("name"),[c,d]=u.useState("asc"),[h,p]=u.useState(1),[f,x]=u.useState(10),[g,v]=u.useState(""),[y,j]=u.useState("all"),[b,N]=u.useState("all"),w=u.useMemo(()=>[...new Set(t.map(e=>e.category).filter(Boolean))].sort(),[t]),k=u.useMemo(()=>{const e=new Date;let s=t.map(t=>{const s=(t.quantity||0)*(t.cost_per_unit||0),r=t.quantity<=t.minimum_stock,a=t.expiry_date&&new Date(t.expiry_date)<e,n=t.expiry_date&&!a&&new Date(t.expiry_date)<=new Date(e.getTime()+2592e6);let i="normal";return 0===t.quantity?i="out_of_stock":a?i="expired":n?i="expiring_soon":r&&(i="low_stock"),{...t,total_value:s,status:i,isLowStock:r,isExpired:a,isExpiringSoon:n}});if(g.trim()){const e=g.toLowerCase();s=s.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e)||t.category?.toLowerCase().includes(e)||t.supplier?.toLowerCase().includes(e))}return"all"!==y&&(s=s.filter(e=>e.category===y)),"all"!==b&&(s=s.filter(e=>e.status===b)),s},[t,g,y,b]),C=u.useMemo(()=>[...k].sort((e,t)=>{let s,r;switch(o){case"name":s=e.name.toLowerCase(),r=t.name.toLowerCase();break;case"category":s=e.category?.toLowerCase()||"",r=t.category?.toLowerCase()||"";break;case"quantity":s=e.quantity,r=t.quantity;break;case"cost_per_unit":s=e.cost_per_unit||0,r=t.cost_per_unit||0;break;case"total_value":s=e.total_value,r=t.total_value;break;case"expiry_date":s=e.expiry_date?new Date(e.expiry_date):new Date("9999-12-31"),r=t.expiry_date?new Date(t.expiry_date):new Date("9999-12-31");break;default:return 0}return s<r?"asc"===c?-1:1:s>r?"asc"===c?1:-1:0}),[k,o,c]),S=Math.ceil(C.length/f),E=(h-1)*f,I=C.slice(E,E+f),$=e=>{p(Math.max(1,Math.min(e,S)))};m.useEffect(()=>{p(1)},[g,y,b]);const L=({field:t,children:s})=>e.jsx(Oe,{className:"cursor-pointer hover:bg-muted/50 select-none text-center",onClick:()=>(e=>{o===e?d("asc"===c?"desc":"asc"):(l(e),d("asc"))})(t),children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[s,o===t?"asc"===c?e.jsx(Fe,{className:"w-4 h-4"}):e.jsx(Me,{className:"w-4 h-4"}):e.jsx(Ve,{className:"w-4 h-4 opacity-50"})]})}),z=t=>{switch(t.status){case"out_of_stock":return e.jsxs(te,{variant:"destructive",className:"arabic-enhanced",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),"نفد المخزون"]});case"expired":return e.jsxs(te,{variant:"destructive",className:"arabic-enhanced",children:[e.jsx(de,{className:"w-3 h-3 mr-1"}),"منتهي الصلاحية"]});case"expiring_soon":return e.jsxs(te,{variant:"secondary",className:"arabic-enhanced",children:[e.jsx(de,{className:"w-3 h-3 mr-1"}),"ينتهي قريباً"]});case"low_stock":return e.jsxs(te,{variant:"outline",className:"arabic-enhanced border-yellow-500 text-yellow-700",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),"مخزون منخفض"]});default:return e.jsxs(te,{variant:"outline",className:"arabic-enhanced border-green-500 text-green-700",children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),"طبيعي"]})}};return s?e.jsx("div",{className:"border rounded-lg",dir:"rtl",children:e.jsxs(Se,{className:"table-center-all",children:[e.jsx(Te,{children:e.jsxs(Ee,{className:"bg-muted/50",children:[e.jsx(Oe,{className:"text-center",children:"#"}),e.jsx(Oe,{className:"text-center",children:"اسم العنصر"}),e.jsx(Oe,{className:"text-center",children:"الفئة"}),e.jsx(Oe,{className:"text-center",children:"الكمية"}),e.jsx(Oe,{className:"text-center",children:"سعر الوحدة"}),e.jsx(Oe,{className:"text-center",children:"القيمة الإجمالية"}),e.jsx(Oe,{className:"text-center",children:"الحالة"}),e.jsx(Oe,{className:"text-center",children:"الاجراءات"})]})}),e.jsx(Ae,{children:[...Array(5)].map((t,s)=>e.jsx(Ee,{children:[...Array(8)].map((t,s)=>e.jsx(Ze,{children:e.jsx("div",{className:"h-4 bg-muted animate-pulse rounded"})},s))},s))})]})}):0===t.length?e.jsx("div",{className:"border rounded-lg",dir:"rtl",children:e.jsxs(Se,{className:"table-center-all",children:[e.jsx(Te,{children:e.jsxs(Ee,{className:"bg-muted/50",children:[e.jsx(Oe,{className:"text-center",children:"#"}),e.jsx(Oe,{className:"text-center",children:"اسم العنصر"}),e.jsx(Oe,{className:"text-center",children:"الفئة"}),e.jsx(Oe,{className:"text-center",children:"الكمية"}),e.jsx(Oe,{className:"text-center",children:"سعر الوحدة"}),e.jsx(Oe,{className:"text-center",children:"القيمة الإجمالية"}),e.jsx(Oe,{className:"text-center",children:"الحالة"}),e.jsx(Oe,{className:"text-center",children:"الاجراءات"})]})}),e.jsx(Ae,{children:e.jsx(Ee,{children:e.jsx(Ze,{colSpan:8,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ke,{className:"w-12 h-12 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground arabic-enhanced",children:"لا توجد عناصر مخزون"})]})})})})]})}):e.jsxs("div",{className:"space-y-4",dir:"rtl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 items-start sm:items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm order-1",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(T,{placeholder:"البحث في المخزون...",value:g,onChange:e=>v(e.target.value),className:"pl-10 arabic-enhanced text-right border-2 focus:border-primary/50 transition-colors"})]}),e.jsxs(O,{value:b,onValueChange:N,children:[e.jsxs(A,{className:"w-[200px] order-2 border-2 focus:border-primary/50 transition-colors",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2 text-orange-500"}),e.jsx(Z,{placeholder:"تصفية حسب الحالة"})]}),e.jsxs(P,{children:[e.jsx(R,{value:"all",children:"جميع الحالات"}),e.jsx(R,{value:"normal",children:"طبيعي"}),e.jsx(R,{value:"low_stock",children:"مخزون منخفض"}),e.jsx(R,{value:"out_of_stock",children:"نفد المخزون"}),e.jsx(R,{value:"expiring_soon",children:"ينتهي قريباً"}),e.jsx(R,{value:"expired",children:"منتهي الصلاحية"})]})]}),e.jsxs(O,{value:y,onValueChange:j,children:[e.jsxs(A,{className:"w-[200px] order-3 border-2 focus:border-primary/50 transition-colors",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2 text-blue-500"}),e.jsx(Z,{placeholder:"تصفية حسب الفئة"})]}),e.jsxs(P,{children:[e.jsx(R,{value:"all",children:"جميع الفئات"}),w.map(t=>e.jsx(R,{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground arabic-enhanced bg-muted/30 px-3 py-2 rounded-lg border",children:["إجمالي العناصر: ",e.jsx("span",{className:"font-semibold text-foreground",children:k.length})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Se,{className:"table-center-all",children:[e.jsx(Te,{children:e.jsxs(Ee,{className:"bg-muted/50",children:[e.jsx(Oe,{className:"text-center",children:e.jsx("span",{className:"arabic-enhanced font-medium",children:"#"})}),e.jsx(L,{field:"name",children:e.jsx("span",{className:"arabic-enhanced font-medium",children:"اسم العنصر"})}),e.jsx(L,{field:"category",children:e.jsx("span",{className:"arabic-enhanced font-medium",children:"الفئة"})}),e.jsx(L,{field:"quantity",children:e.jsx("span",{className:"arabic-enhanced font-medium",children:"الكمية"})}),e.jsx(L,{field:"cost_per_unit",children:e.jsx("span",{className:"arabic-enhanced font-medium",children:"سعر الوحدة"})}),e.jsx(L,{field:"total_value",children:e.jsx("span",{className:"arabic-enhanced font-medium",children:"القيمة الإجمالية"})}),e.jsx(Oe,{className:"text-center",children:e.jsx("span",{className:"arabic-enhanced font-medium",children:"الحالة"})}),e.jsx(Oe,{className:"text-center",children:e.jsx("span",{className:"arabic-enhanced font-medium",children:"الاجراءات"})})]})}),e.jsx(Ae,{children:I.map((t,s)=>e.jsxs(Ee,{className:"hover:bg-muted/50",children:[e.jsx(Ze,{className:"font-medium text-center",children:E+s+1}),e.jsx(Ze,{className:"font-medium text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-primary-foreground text-sm font-medium",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("span",{className:"arabic-enhanced",children:t.name}),t.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.description})]})]})}),e.jsx(Ze,{className:"text-center",children:t.category?e.jsx(te,{variant:"outline",className:"arabic-enhanced",children:t.category}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(Ze,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"font-medium",children:t.quantity}),e.jsx("span",{className:"text-muted-foreground text-sm",children:t.unit||"قطعة"})]})}),e.jsx(Ze,{className:"text-center",children:t.cost_per_unit?e.jsx("span",{className:"font-medium",children:i(t.cost_per_unit)}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(Ze,{className:"text-center",children:e.jsx("span",{className:"font-medium",children:i(t.total_value)})}),e.jsx(Ze,{className:"text-center",children:z(t)}),e.jsx(Ze,{className:"min-w-[200px] text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsxs(D,{variant:"ghost",size:"sm",className:"action-btn-view",onClick:e=>{e.preventDefault(),e.stopPropagation(),n(t)},children:[e.jsx(re,{className:"w-4 h-4 ml-1"}),e.jsx("span",{className:"text-xs arabic-enhanced",children:"عرض"})]}),e.jsxs(D,{variant:"ghost",size:"sm",className:"action-btn-edit",onClick:e=>{e.preventDefault(),e.stopPropagation(),r(t)},children:[e.jsx(Re,{className:"w-4 h-4 ml-1"}),e.jsx("span",{className:"text-xs arabic-enhanced",children:"تعديل"})]}),e.jsxs(D,{variant:"ghost",size:"sm",className:"action-btn-delete",onClick:e=>{e.preventDefault(),e.stopPropagation(),a(t.id)},children:[e.jsx(Ie,{className:"w-4 h-4 ml-1"}),e.jsx("span",{className:"text-xs arabic-enhanced",children:"حذف"})]})]})})]},t.id))})]})})}),C.length>0&&e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:e.jsxs("p",{className:"text-sm text-muted-foreground arabic-enhanced",children:["عرض ",E+1," إلى ",Math.min(E+f,C.length)," من ",C.length," عنصر"]})}),e.jsxs("div",{className:"flex items-center space-x-6 space-x-reverse lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("p",{className:"text-sm font-medium arabic-enhanced",children:"عدد الصفوف لكل صفحة"}),e.jsxs(O,{value:`${f}`,onValueChange:e=>x(Number(e)),children:[e.jsx(A,{className:"h-8 w-[70px]",children:e.jsx(Z,{placeholder:f})}),e.jsx(P,{side:"top",children:[5,10,20,30,50].map(t=>e.jsx(R,{value:`${t}`,children:t},t))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium arabic-enhanced",children:["صفحة ",h," من ",S]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsxs(D,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>$(1),disabled:1===h,children:[e.jsx("span",{className:"sr-only",children:"الذهاب إلى الصفحة الأولى"}),e.jsx($e,{className:"h-4 w-4"})]}),e.jsxs(D,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>$(h-1),disabled:1===h,children:[e.jsx("span",{className:"sr-only",children:"الذهاب إلى الصفحة السابقة"}),e.jsx(le,{className:"h-4 w-4"})]}),e.jsxs(D,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>$(h+1),disabled:h===S,children:[e.jsx("span",{className:"sr-only",children:"الذهاب إلى الصفحة التالية"}),e.jsx(ze,{className:"h-4 w-4"})]}),e.jsxs(D,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>$(S),disabled:h===S,children:[e.jsx("span",{className:"sr-only",children:"الذهاب إلى الصفحة الأخيرة"}),e.jsx(Le,{className:"h-4 w-4"})]})]})]})]})]})}function sa(){ue();const[t,s]=u.useState(!1),[r,a]=u.useState(!1),[n,i]=u.useState(!1),[o,l]=u.useState(!1),[c,d]=u.useState(!1),[m,h]=u.useState(null),[p,f]=u.useState("inventory"),{items:x,filteredItems:g,isLoading:v,error:y,categories:j,suppliers:_,totalValue:b,lowStockCount:N,expiredCount:w,expiringSoonCount:k,loadItems:C,createItem:S,updateItem:T,deleteItem:E,recordUsage:O,clearError:A}=ae(),{appointments:Z,loadAppointments:P}=me();u.useEffect(()=>{C(),P()},[C,P]);const R=({title:t,value:s,icon:r,color:a="blue",trend:n})=>e.jsx(H,{className:pe(a),children:e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:s}),n&&e.jsxs("div",{className:"flex items-center mt-1",children:[n>0?e.jsx(We,{className:"w-4 h-4 text-green-500 mr-1"}):e.jsx(Ke,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:"text-xs "+(n>0?"text-green-500":"text-red-500"),children:[Math.abs(n),"%"]})]})]}),e.jsx("div",{className:`text-2xl ${fe(a)}`,children:r})]})})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"إدارة المخزون"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"تتبع المواد والمعدات ومستويات المخزون"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsxs(D,{variant:"outline",onClick:async()=>{if(0!==g.length)try{const e=g.filter(e=>{const t=parseFloat(String(e.cost_per_unit||0))||0,s=parseFloat(String(e.unit_price||0))||0;return 0===t&&0===s});await ge.exportInventoryToExcel(g);let t=`تم تصدير ${g.length} عنصر مخزون بنجاح إلى ملف Excel مع التنسيق الجميل!`;e.length>0&&(t+=` (تنبيه: ${e.length} عنصر لا يحتوي على سعر - يمكنك تعديل العناصر لإضافة الأسعار)`),xe.exportSuccess(t)}catch(e){console.error("Error exporting inventory:",e),xe.exportError("فشل في تصدير بيانات المخزون")}else xe.noDataToExport("لا توجد بيانات مخزون للتصدير")},children:[e.jsx(De,{className:"w-4 h-4 ml-2"}),"تصدير"]}),e.jsxs(D,{onClick:()=>s(!0),className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"إضافة عنصر جديد"})]})]})]}),e.jsxs(ve,{value:p,onValueChange:f,className:"w-full",children:[e.jsxs(ye,{className:"grid w-full grid-cols-2",children:[e.jsxs(je,{value:"inventory",className:"flex items-center gap-2",children:[e.jsx(ke,{className:"w-4 h-4"}),"المخزون"]}),e.jsxs(je,{value:"alerts",className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),"التنبيهات",N+w+k>0&&e.jsx(te,{variant:"destructive",className:"ml-1 text-xs",children:N+w+k})]})]}),e.jsxs(_e,{value:"inventory",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(R,{title:"إجمالي العناصر",value:x.length,icon:e.jsx(ke,{}),color:"blue"}),e.jsx(R,{title:"قيمة المخزون",value:e.jsx(qe,{amount:b}),icon:e.jsx(he,{}),color:"green"}),e.jsx(R,{title:"مخزون منخفض",value:N,icon:e.jsx(M,{}),color:"yellow"}),e.jsx(R,{title:"منتهي الصلاحية",value:w+k,icon:e.jsx(J,{}),color:"red"})]}),y&&e.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:[e.jsxs("p",{className:"text-destructive",children:["خطأ: ",y]}),e.jsx(D,{variant:"outline",size:"sm",onClick:A,className:"mt-2",children:"إغلاق"})]}),e.jsx(ta,{items:g,isLoading:v,onEdit:e=>{h(e),a(!0)},onDelete:e=>{const t=x.find(t=>t.id===e);t&&(h(t),i(!0))},onViewDetails:e=>{h(e),d(!0)}})]}),e.jsx(_e,{value:"alerts",className:"space-y-6",children:e.jsx(pr,{items:x,onRefresh:C,onItemClick:e=>{h(e),a(!0)}})})]}),e.jsx(ir,{isOpen:t,onClose:()=>s(!1),onSave:async e=>{await S(e)},categories:j,suppliers:_}),e.jsx(dr,{isOpen:r,onClose:()=>a(!1),onSave:async(e,t)=>{await T(e,t)},item:m,categories:j,suppliers:_}),e.jsx(ur,{isOpen:n,onClose:()=>i(!1),onConfirm:async e=>{await E(e)},item:m,isLoading:v}),e.jsx(hr,{isOpen:o,onClose:()=>l(!1),onSave:async e=>{await O(e)},item:m,appointments:Z}),e.jsx(ea,{isOpen:c,onClose:()=>d(!1),item:m})]})}Qr.displayName=wr.displayName;export{sa as default};
